<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞</title>
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <div class="container">
      <h2>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞</h2>

      <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
      <div class="form-section">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ:</label>
        <select id="event_id" required>
          <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</option>
          {% for e in events %}
            <option value="{{ e.id }}">{{ e.title }}</option>
          {% endfor %}
        </select>

        <label>–í–∞—à–µ –∏–º—è:</label>
        <input id="name" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required />
      </div>

      <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ -->
      <div class="mode-switch">
        <button id="btnFileMode" class="mode-btn active" onclick="switchMode('file')">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</button>
        <button id="btnCameraMode" class="mode-btn" onclick="switchMode('camera')">üì∑ –°–¥–µ–ª–∞—Ç—å —Ñ–æ—Ç–æ</button>
      </div>

      <!-- –†–µ–∂–∏–º –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ -->
      <div id="fileMode" class="photo-mode">
        <label>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ:</label>
        <input type="file" id="fileInput" accept="image/*" />
        <div id="filePreview" class="preview-wrap" style="display:none;">
          <img id="filePreviewImg" class="preview-img" alt="preview" />
        </div>
      </div>

      <!-- –†–µ–∂–∏–º –∫–∞–º–µ—Ä—ã -->
      <div id="cameraMode" class="photo-mode" style="display:none;">
        <div class="camera-container">
          <video id="video" autoplay playsinline></video>
          <canvas id="canvas" style="display:none;"></canvas>

          <div class="camera-controls">
            <button id="btnStartCamera" onclick="startCamera()" class="camera-btn">üé• –í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É</button>
            <button id="btnCapture" onclick="capturePhoto()" class="camera-btn" style="display:none;">üì∏ –°–¥–µ–ª–∞—Ç—å —Å–Ω–∏–º–æ–∫</button>
            <button id="btnRetake" onclick="retakePhoto()" class="camera-btn" style="display:none;">üîÑ –ü–µ—Ä–µ—Å–Ω—è—Ç—å</button>
          </div>

          <div id="capturedPreview" class="preview-wrap" style="display:none;">
            <img id="capturedImg" class="preview-img" alt="captured" />
          </div>
        </div>
      </div>

      <!-- –ö–Ω–æ–ø–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
      <button id="btnRegister" onclick="register()" class="submit-btn">‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>

      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
      <div id="result" class="result-box"></div>

      <a href="/login" style="display:block; margin-top:15px; text-align:center; color:#007bff;">–í—Ö–æ–¥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</a>
    </div>

    <script src="/static/user.js"></script>
  </body>
</html>
